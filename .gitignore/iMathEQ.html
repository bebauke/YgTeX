<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<title>iMathEQ | Math Equation Editor for MathML and Latex</title>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<!--meta name="viewport" content="width=device-width, initial-scale=1.0"/-->
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
 
 	<link rel="icon" href="icons/favicon.ico" />
	<script src="src/jquery-latest.min.js"></script>
	<script type='text/javascript' charset = "utf-8" src='src/imatheqfunctions.js'></script>
	<!--file system-->
<Style>
.modal {
    display: none; /* Hidden by default */
    position: fixed; /* Stay in place */
    z-index: 999; /* Sit on top */
    left: 20%;
    top: 30%;
    overflow: auto; /* Enable scroll if needed */
    background-color: #FFFFFF; /* Fallback color */
    border: 1px solid #000000;
    width: 60%;
    height: 50%
}
.modal-content {
    background-color: #fefefe;
    padding-right:5px;
    border: 1px solid #888;
    //width: 100%; /* Could be more or less, depending on screen size */
    /*height: 24px;*/
    font-size: 22px;
}
.resultclose {
    color: #000000;
    float: right;
    font-size: 22px;
    border-left: 1 solid #000000;
    border-bottom: 1 solid #000000;
    //font-weight: bold;
}

.resultclose:hover,
.resultclose:focus {
    color: black;
    text-decoration: none;
    cursor: pointer;
}
</Style>
<script type="text/javascript" charset = "utf-8" >
  var editor;
  var oResultPopup, oResultClose;
  var lskey;



window.onload=function () {
  	  lskey = "ROwhMS7EhwP5veV7YgWDGAQZFYc9dBiFC0uSafcUtOJmYKZu4Hdj2Ad6u4u3Xe5a";
	  editor = org.imatheq.formulaeditor.createEditor(document.getElementById('myEditor'), 
			  "ROwhMS7EhwP5veV7YgWDGAQZFYc9dBiFC0uSafcUtOJmYKZu4Hdj2Ad6u4u3Xe5a", "EN", null, 400);
	  
	  oResultPopup = document.getElementById("myResult");
	  oResultClose = document.getElementsByClassName("resultclose")[0];
	  oResultClose.onclick = function() {
			oResultPopup.style.display = "none";
			for(var i=oResultPopup.childNodes.length-1; i>3; i--) {
				oResultPopup.removeChild(oResultPopup.childNodes.item(i));
			}
		}

    }
  
function getMathML()
{
	var mathml = editor.getMathML();
	var obj = document.getElementById("imatheqmmloutput");
	obj.value = mathml;	
}

function setMathML()
{
	var mml = document.getElementById("imatheqmmloutput").value;
	if(mml != "") {
		editor.setMathML(mml);
	}
	getLatex();
}

//When the user clicks on <span> (x), close the modal
function getLatex() 
{
	var mathml = editor.getMathML();
	  $.ajax({
			url: "//www.imatheq.com//imatheqapis/mml2tex",
			type: "get",
			dataType: "text",	//receiving data
			data: { 
			  mml: mathml,
			  lsk: lskey
			},		//fsArr.toString(),
			contentType: 'application/json',	//sending data
			//mimeType: 'application/text',
			success: function (tex) {   // Execute Ajax GET request on URL of "someservlet" and execute the following function with Ajax response text...
				//document.getElementById("imatheqlatexoutput").innerHTML = tex.substring(tex.indexOf("$")+1, tex.lastIndexOf("$"))
				document.getElementById("imatheqlatexoutput").value = tex.substring(tex.indexOf("$")+1, tex.lastIndexOf("$"))
			},
			error:function(data,status,er) {
              alert("error: "+data+" status: "+status+" er:"+er);
			}
		  });
}

function setLatex() 
{
	var tex = document.getElementById("imatheqlatexoutput").value;
	if(tex != "") {
	  $.ajax({
			url: "//www.imatheq.com//imatheqapis/tex2mml",
			type: "get",
			dataType: "xml",	//receiving data type
			data: { 
			  tex: tex,
			  lsk: lskey
			},		//fsArr.toString(),
			contentType: 'application/json',	//sending data type
			//mimeType: 'application/text',
			success: function (mathml) {   // Execute Ajax GET request on URL of "someservlet" and execute the following function with Ajax response text...
				editor.setMathML(mathml.documentElement.outerHTML);
				getMathML();
			},
			error:function(data,status,er) {
              	alert("error: "+data+" status: "+status+" er:"+er);
			}
		  });
	}
}

function getImage() 
{
	var imagedata = editor.getImage();
	//var obj = document.getElementById("displaymathml");
	var img = new Image();
	img.src = imagedata;
	oResultPopup.appendChild(img);
	oResultPopup.style.display="block";
}

</script>
<!-- Google Analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-81271057-1', 'auto');
  ga('send', 'pageview');

</script>
</head>
<body>
  <div id="myEditor" class="imatheqvisibletextarea">
  </div>
<br>
<span>MathML</span>
<textarea id="imatheqmmloutput" autocapitalize="off" spellcheck="false" style="width: 100%; height: 100px; box-sizing: border-box; "></textarea>
<!-- /div-->
<input type="button" onclick="javascript:getMathML()" value=GetMathML />
<input type="button" onclick="javascript:setMathML()" value=SetMathML />
<br>
<br>
<br>
<!-- div style="width:100%; height: 100px; padding-left:2px; padding-right:2px;"-->
<span>LaTex</span>
<textarea id="imatheqlatexoutput" autocapitalize="off" spellcheck="false" style="width: 100%; height: 100px; box-sizing: border-box; "></textarea>
<!-- /div-->
<input type="button" onclick="javascript:getLatex()" value=GetLaTex />
<input type="button" onclick="javascript:setLatex()" value=SetLaTex />

<span style="float:right"><a target="blank"  href="../../../corpsite/index.html">iMathEQ.com</a>&nbsp;&nbsp;</span>
<div id="myResult" class="modal">
  <!-- Modal content -->
  <div class="modal-content">
    View Result&nbsp;&nbsp;&nbsp;<span class="resultclose">x</span>
  </div>

</div>
</body>
</html>